<section class="new-training">
    <form #f="ngForm" (ngSubmit)="onStartTraining(f)">
        <mat-card>
            <mat-card-title>Time to start workout</mat-card-title>
            <mat-card-content>
               @if (!((isLoading$ | async) && exercises$ | async)) {
                <mat-form-field>
                    <mat-label>Choose Exercise</mat-label>
                    <mat-select ngModel name="exercise" required>
                        @for (exercise of exercises$ | async; track $index) {
                            <mat-option [value]="exercise.id">{{ exercise.name }}</mat-option>
                        }
                    </mat-select>
                </mat-form-field>
                }
                @if (isLoading$ | async) {
                    <mat-spinner></mat-spinner>
                }@else {
                    <mat-card-actions>
                        @if (exercises$ | async) {
                            <button type="submit" mat-button [disabled]="f.invalid">Start</button>
                        }@else {
                            <button type="button" mat-button (click)="fetchExercises()">Fetch Again</button>
                        }
                    </mat-card-actions>
                }
            </mat-card-content>
        </mat-card>
    </form>
</section>